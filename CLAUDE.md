# Claude Code Entry Point

## 约束

- WebFetch工具 改用为  MCP fetch 工具 (`mcp__fetch-mcp__*`)
- 禁止擅自 调用Bash工具执行 运行开发的服务器项目 , 告知用户执行命令
- 禁止擅自 调用Bash工具执行 kill杀死进程 , 告知用户执行命令
- 禁止擅自 调用Bash工具执行 编译项目 , 告知用户编译
- 禁止擅自 调用Bash工具执行 测试脚本

## 选项

- **--c7**: 自动激活 context7_mcp 功能 , 用于获取目标库文档和代码示例
  - 根据当前项目技术栈中获取到依赖相对应的版本 , 如果没有找到则使用最新版本库
  - 当用户查询包含库名称、框架或技术文档时 , 自动调用 context7_mcp 服务
  - 支持所有主流编程语言和框架的文档检索
- **--web**: 自动激活互联网搜索模式 , 获取最新信息
  - 优先使用 WebSearch 工具搜索最新资讯、技术动态、解决方案
  - 自动触发 --gh 选项 , 搜索代码库、项目、问题
  - 自动触发 --c7 选项 , 结合官方文档和实时信息
  - 自动触发 fetch-mcp mcp功能 , 获取往网站信息 
  - 适用于: 新技术查询、版本更新信息、最新最佳实践、实时问题解决
  - 搜索策略: 先搜索获取概况 , 再用c7获取详细文档
- **--gh**: 自动激活 GitHub MCP 搜索模式
  - 优先使用 github_mcp 工具搜索代码库、项目、问题
  - 适用于: 开源项目查找、代码示例搜索、技术方案调研
- **--g**: 自动激活 Grep MCP 搜索模式
  - 优先使用 MCP grep 工具进行代码库内容搜索
  - 支持正则表达式和复杂搜索模式
  - 适用于: 代码查找、函数定位、配置搜索、日志分析
  - 搜索策略: 智能模式匹配，支持跨文件内容检索
- **--mysql**: 自动激活 MySQL MCP 查询模式
  - 优先使用 mysql_mcp 工具查询数据库结构和数据
  - 适用于: 表结构分析、数据查看、索引诊断
  - 查询策略: 只读模式，禁止修改操作

## 项目导航

### llms.txt - 项目结构导航

项目根目录的 `llms.txt` 文件提供了项目的整体结构导航，包含：

- 项目目录组织和文件布局
- 核心文件和入口文件位置
- 技术栈和依赖信息

**使用场景**：处理新项目或需要了解项目代码结构时，应首先查阅此文件。

### .agentdocs/index.md - 文档与记忆导航

`.agentdocs/index.md` 作为项目知识索引，记录了所有面向 AI 代理的文档，包含：

- 各类文档的分类、主要内容和读取场景
- 全局关键记忆和执行约束
- 当前进行中的任务文档

**使用场景**：需要了解技术治理信息、架构约定、设计规范或历史决策时，应先查阅索引文档，再按索引定位并阅读相关文档。

## 文档与记忆

使用文档与记忆来沉淀背景信息、对齐执行约束。

所有文档与记忆都采用 Markdown 格式，存放于 `.agentdocs/` 及其子目录下，仅面向 AI 代理使用，不包含任何人类向说明。

使用 `.agentdocs/index.md` 作为索引文档，记录所有文档的主要内容、读取场景及全局关键记忆，例如：

```
  ## 产品文档
  `prd/idea.md` - 用户关于整个项目的想法
  `prd/board.md` - 白板模块的整体产品文档

  ## 前端文档
  `frontend/architecture.md` - 前端架构与技术约束，修改任何前端代码时必读
  `frontend/ui-design.md` - 设计风格与样式文档，修改界面时必读

  ## 后端文档
  `backend/architecture.md` - 后端架构与技术约束，修改任何后端代码时必读
  `backend/api.md` - 后端 API 主文档，进行任何前后端对接工作时必读

  ## 当前任务文档
  `workflow/251006-dev-fix-audio-player.md` - 修复音频播放器BUG
  `workflow/201007-main-floweditor-edge-feature.md` - 为工作流编辑器增加连线功能

  ## 全局重要记忆
```

文档创建与更新原则：

- 命名格式: `[日期]-[分支]-[种类]-[问题].md`
- 不要创建工作汇报或任务总结性质的文档，无使用场景。
- 新增的文档都必须在索引文档中分类并记录。
- 如果已有相关文档或记忆，优先更新现有内容而非新建。
- 更新文档或记忆时，应按照原格式重新组织整理文件，而非单纯追加在末尾。
- 如缺少索引文档 `.agentdocs/index.md`，先初始化索引文档，并补齐基础技术治理信息。

### 文档

文档沉淀项目架构、领域边界与跨文件共性信息，帮助在处理复杂任务时快速了解全局上下文，避免重复遍历大量代码。

根据项目情况合理划分子目录与文档类型，例如：

- 产品文档：用户的想法，某个模块的具体功能设计等
- 前端文档：前端技术架构，组件复用规则等
- 后端文档：后端技术架构，API文档等

特殊文档类型：

- 任务文档：记录复杂任务的现状分析、方案设计、背后思考、任务阶段及TODO拆解等所有内容。存放于 `.agentdocs/workflow/` 目录下 , 命名格式: `[日期]-[分支]-[种类]-[任务描述].md` 

### 记忆

记忆沉淀项目中长期适用的重要共识、约束、原则或事实，确保处理不同任务时都遵循一致的执行准则。 典型的记忆示例：

- 新实现了可复用的自定义滚动条 React 组件 CustomScrollArea，在前端相关文档中记忆：“开发时滚动容器都应优先使用 CustomScrollArea”。
- 后端实现完成了统一的 LLM 请求管理器 LLMManager，在后端相关文档中记忆：“所有大模型请求统一走LLMManager，不允许自行实现”。

## 任务处理指南

- 当需求不明确时，在继续之前向用户提出问题来澄清需求。
- 对于用户提出的设想和意见，结合项目情况进行全面客观的分析，而不是一味遵循。
- 对于复杂任务，在分析和规划阶段先从宏观抽象层面厘清问题，再回到具体执行步骤。
- 对于复杂任务（例如涉及多个模块或跨领域变更），必须先制定分阶段实施计划并创建任务文档，然后按阶段使用 TodoWrite 规划并推进执行。
- 当问题超过三次修改仍未解决时，应回到三次修改之前重新审视，分析并探索与失败尝试不同的方案。
- 若当前任务可能需要了解跨模块约束、设计约定、使用规范或历史决策（例如样式基准、接口契约、复用组件规则）等技术治理信息时，应先查阅 `.agentdocs/index.md`，再按索引定位并阅读相关文档。
- 在所需文档缺失时，参照“文档创建与更新原则”补齐。
